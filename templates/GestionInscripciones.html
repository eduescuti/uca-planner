<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UCA Planner | Inscripciones</title>
  <link rel="stylesheet" href="../static/css/GestionInscripciones.css">
</head>

<body>
  <!-- HEADER -->
  <header>
    <img src="../static/img/logo-uca.jfif" class="imagen1">
    <h2 class="titulo">Gestión de Inscripciones</h2>
    <button type="button" id="volver">
      <a href="/home">Volver a Inicio</a>
    </button>
  </header>

  <!-- DESPLEGABLES -->
  {% for inscripcion in param["inscripciones"][0:] %}
  <article class="inscripciones">
    <!-- ACA VAN A IR LOS DESPLEGABLES, Y SE VAN A ABRIR CON UN FOR USANDO JINJA -->
    <details class="prueba">

      <summary>INSCRIPCION {{inscripcion["año"]}} {{inscripcion["cuatri"]}}{{inscripcion["tipo"]}} CUATRIMESTRE
      </summary>
      <div class="row">
        <div class="col-1">
          <input type="submit" class="cierre-ins" value="Cerrar Inscripción">

          <p class="texto">ESTADO:</p>
          {% if inscripcion["estado"] == "cerrada" %}
          <p class="cerrada">{{inscripcion["estado"]}}</p>
          {% else %}
          <p class="abierta">{{inscripcion["estado"]}}</p>
          {% endif %}
        </div>
        <div class="col-2">
          <input type="search" placeholder="Filtrar por..." name="search" id="inputFiltro" oninput="filtrarTabla()">
          <table id="tablaCurso">
            <thead>
              <tr>
                <th>Cantidad de Inscriptos </th>
                <th>Comisión</th>
                <th>Materia</th>
                <th>Código</th>
              </tr>
            </thead>
            <tbody>
              {% for curso in param["cursos"][0:] %}
              {% if curso["id_inscripcion"] == inscripcion["id"] %}
              <tr>
                <td>{{curso["inscriptos"]}}/{{curso["cupo"]}}</td>
                <td>{{curso["materia"]["comision"]}}</td>
                <td>{{curso["materia"]["nombre"]}}</td>
                <td>{{curso["materia"]["codigo"]}}</td>
              </tr>
              {% endif %}
              {% endfor %}
            </tbody>
          </table>
          <!-- AGREGAR MATERIA -->
          <!-- <button id="abrir" onclick="abrir()">Agregar Curso</button> -->
          <a id="btnAgregarCurso" href="/cursos">Agregar Curso</a>

        </div>
      </div>

    </details>
  </article>

  {% endfor %}

  <div class="card" id="contenedor">
    <h3>Agregar una Inscripción</h3>
    <form onsubmit="return validarDatos()" action="/agregar_inscripcion" method="post" id="formInscripciones">

      <label for="anio" id="año">Ingrese el año del período de Inscripciones:</label>
      <input type="text" name="anio" id="anio" placeholder="Ingrese el año.." onclick="insertarAnioActual()"
        onfocusout="validarAnio()">
      <p class="error" id="error anio"></p>

      <label for="cuatrimestre" id="labelCuatri">Asigne el cuatrimestre del período de Inscripciones:</label>
      <select id="cuatrimestre" name="cuatrimestre" title="Seleccionar...">
        <option value="0" disabled selected>Seleccionar..</option>
        <option value="1">Primer Cuatrimestre (1C)</option>
        <option value="2">Segundo Cuatrimestre (2C)</option>
      </select>

      <label for="estado" id="labelEstado">Asigne el estado del período de Inscripciones:</label>
      <select id="estado" name="estado" title="Seleccionar...">
        <option value="0" disabled selected>Seleccionar..</option>
        <option value="abierta">Abierta</option>
        <option value="cerrada">Cerrada</option>
      </select>



      {% if param["estado"] == "carga fallida" %}
      <p class="error" id="error carga">{{param["error"]["error inscripcion"]}}</p>
      {% endif %}

      <input type="submit" value="Agregar Inscripción" id="btnInscripciones">
      <p class="error" id="error_incompleto"></p>
    </form>
  </div>

  <!-- <a href="/inscripciones" id="agregarInscripcion">Agregar período de Inscripción</a> -->

  <script language="javascript" type="text/javascript" src="../static/js/GestionInscripciones.js"></script>
</body>

</html>